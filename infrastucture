┌─────────────────────────────────────────────────────────────────────────────────────────────┐
│                                    Internet / Users                                         │
└──────────────────────────────────────┬──────────────────────────────────────────────────────┘
                                       │
                                       │ HTTPS (443)
                                       │
                        ┌──────────────▼──────────────┐
                        │   Route53 DNS Service       │
                        │  - app1.yourdomain.com      │
                        │  - app2.yourdomain.com      │
                        │  - app4.yourdomain.com      │
                        └──────────────┬──────────────┘
                        ┌──────────────▼──────────────┐
                        │                             │
                        │      Internet Gateway       │
                        │                             │
                        │                             │
                        └──────────────┬──────────────┘
                                       │
                ┏━━━━━━━━━━━━━━━━━━━━━━┻━━━━━━━━━━━━━━━━━━━━━━┓
                ┃                                               ┃
                │                                               │
       ┌────────▼─────────┐                           ┌────────▼────────┐
       │  EKS ALB (Public)│                           │ Windows ALB     │
       │  Internet-facing │                           │ (Public)        │
       │  Port: 443       │                           │ Port: 443       │
       └────────┬─────────┘                           └────────┬────────┘
                │                                               │
┌───────────────┴───────────────────────────────────────────────┴────────────────────────────┐
│                          AWS VPC (10.0.0.0/16)                                             │
│                                                                                            │
│  ┌─────────────────────────────────────────────────────────────────────────────────────┐   │
│  │                    Public Subnets (10.0.1.0/24, 10.0.2.0/24, 10.0.3.0/24)          │  │
│  │                                                                                    │  │
│  │  ┌──────────────┐    ┌──────────────┐    ┌──────────────┐                        │  │
│  │  │ NAT Gateway  │    │ NAT Gateway  │    │ NAT Gateway  │                        │  │
│  │  │    (AZ-1)    │    │    (AZ-2)    │    │    (AZ-3)    │                        │  │
│  │  └──────┬───────┘    └──────┬───────┘    └──────┬───────┘                        │  │
│  └─────────┼────────────────────┼────────────────────┼──────────────────────────────┘  │
│            │                    │                    │                                 │
│            │                    │                    │                                 │
│  ┌─────────▼────────────────────▼────────────────────▼──────────────────────────────┐  │
│  │              EKS Private Subnets (10.0.10.0/24, 10.0.11.0/24, 10.0.12.0/24)      │  │
│  │                                                                                  │  │
│  │  ┌──────────────────────────────────────────────────────────────────┐           │  │
│  │  │                    EKS Control Plane (Managed by AWS)             │          │  │
│  │  └──────────────────────────┬───────────────────────────────────────┘           │  │
│  │                             │                                                   │  │
│  │  ┌──────────────────────────▼───────────────────────────────────────┐           │  │
│  │  │                    EKS Worker Nodes (Auto Scaling Group)          │          │  │
│  │  │                    Min: 2, Max: 10, Desired: 3                    │          │  │
│  │  │                                                                   │          │  │
│  │  │  ┌─────────────────────────────────────────────────────────────┐ │           │  │
│  │  │  │  Namespace: production                                       │ │          │  │
│  │  │  │                                                              │ │          │  │
│  │  │  │  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐      │ │            │  │
│  │  │  │  │   App-1 Pod  │  │   App-2 Pod  │  │   App-3 Pod  │      │ │            │  │
│  │  │  │  │  Replicas: 3 │  │  Replicas: 3 │  │  Replicas: 3 │      │ │            │  │
│  │  │  │  │  Port: 8080  │  │  Port: 8081  │  │  Port: 8082  │      │ │            │  │
│  │  │  │  └──────┬───────┘  └──────┬───────┘  └──────┬───────┘      │ │            │  │
│  │  │  │         │                  │                  │            │ │            │  │
│  │  │  │  ┌──────▼──────────────────▼──────────────────▼───────┐    │ │            │  │
│  │  │  │  │          ClusterIP Services                        │    │ │            │  │
│  │  │  │  │  app1-svc:8080, app2-svc:8081, app3-svc:8082       │    │ │            │  │
│  │  │  │  └──────────────────────┬─────────────────────────────     │ │            │  │
│  │  │  │                         │                                  │ │            │  │
│  │  │  │  ┌──────────────────────▼──────────────────────────────┐   │ │            │  │
│  │  │  │  │            Ingress Resource (ALB)                   │   │ │            │  │
│  │  │  │  │                                                     │   │ │            │  │
│  │  │  │  │                                                     │   │ │            │  │
│  │  │  │  │                                                     │
│  │  │  │  │                   
│  │  │  │  └─────────────────────────────────────────────────────┘   │ │            │  │
│  │  │  │                                                            │ │            │  │
│  │  │  │  Components:                                               │ │            │  │
│  │  │  │  • Network Policies (Pod-to-Pod & DB access)               │ │            │  │
│  │  │  │  • External Secrets Operator (DB credentials)              │ │            │  │
│  │  │  │                                                            │ │            │  │
│  │  │  │                                                            │ │            │  │
│  │  │  └──────────────────────────────────────────────────────────┘ │              │  │
│  │  └────────────────────────────────────────────────────────────────┘             │  │
│  │                                                                                 │  │
│  │                             │ SQL Connection (1433)                             │  │
│  │                             │ TLS Encrypted                                     │  │
│  └─────────────────────────────┼──────────────────────────────────────────────────┘   │
│                                │                                                      │
│  ┌─────────────────────────────▼──────────────────────────────────────────────────┐  │
│  │           Windows Private Subnets (10.0.20.0/24, 10.0.21.0/24)                 │  │
│  │                                                                                │  │
│  │  ┌────────────────────────────┐         ┌────────────────────────────┐         │  │
│  │  │   Windows Server 2022 (1)  │         │   Windows Server 2022 (2)  │         │  │
│  │  │   EC2 Instance: t3.large   │         │   EC2 Instance: t3.large   │         │  │
│  │  │   IP: 10.0.20.10           │         │   IP: 10.0.21.10           │         │  │
│  │  │                            │         │                            │         │  │
│  │  │  ┌──────────────────────┐  │         │  ┌──────────────────────┐  │         │  │
│  │  │  │     IIS 10.0         │  │         │  │     IIS 10.0         │  │         │  │
│  │  │  │  ┌────────────────┐  │  │         │  │  ┌────────────────┐  │  │         │  │
│  │  │  │  │ App-4          │  │  │         │  │  │ App-5          │  │  │         │  │
│  │  │  │  │ App Pool       │  │  │         │  │  │ App Pool       │  │  │         │  │
│  │  │  │  │ Port: 80/443   │  │  │         │  │  │ Port: 80/443   │  │  │         │  │
│  │  │  │  └────────────────┘  │  │         │  │  └────────────────┘  │  │         │  │
│  │  │  └──────────────────────┘  │         │  └──────────────────────┘  │         │  │
│  │  │                            │         │                            │         │  │
│  │  │  Components:               │         │  Components:               │         │  │
│  │  │  • CloudWatch Agent        │         │  • CloudWatch Agent        │         │  │
│  │  │  • Systems Manager Agent   │         │  • Systems Manager Agent   │         │  │
│  │  │  • Oracle Client (ODAC)    │         │  • Oracle Client (ODAC)    │         │  │
│  │  │  • IAM Instance Profile    │         │  • IAM Instance Profile    │         │  │
│  │  └────────────┬───────────────┘         └────────────┬───────────────┘         │  │
│  │               │                                      │                         │  │
│  │               │            Oracle Connection (1521)  │                         │  │
│  │               │            TLS Encrypted              │                        │  │
│  └───────────────┼───────────────────────────────────────┼─────────────────────────┘  │
│                  │                                       │                            │
│                  └───────────────┬───────────────────────┘                            │
│                                  │                                                    │
│  ┌───────────────────────────────▼────────────────────────────────────────────────┐  │
│  │              Database Subnets (10.0.30.0/24, 10.0.31.0/24)                     │  │
│  │                                                                                │  │
│  │  ┌──────────────────────────────────────────────────────────────────┐          │  │
│  │  │  RDS SQL Server (Multi-AZ) - For App1, App2, App3               │          │  │
│  │  │  ┌────────────────────────┐                                     │          │  │
│  │  │  │   Primary (AZ-1)       │                                     │          │  │
│  │  │  │   IP: 10.0.30.10       │                                     │          │  │
│  │  │  │   Port: 1433          │                                      │          │  │
│  │  │  │   Instance: r5.xlarge │                                      │          │  │
│  │  │  └────────────────────────┘                                     │          │  │
│  │  │  Endpoint: sql.xxx.rds.amazonaws.com                            │          │  │
│  │  │                                                                 │          │  │
│  │  │  • Backup: 35 days retention                                    │          │  │
│  │  │  • Performance Insights: Enabled                                │          │  │
│  │  └──────────────────────────────────────────────────────────────────┘        │  │
│  │                                                                              │  │
│  │  ┌──────────────────────────────────────────────────────────────────┐        │  │
│  │  │  RDS Oracle (Multi-AZ) - For App4, App5                         │          │  │
│  │  │  ┌────────────────────────┐                                     │          │  │
│  │  │  │   Primary (AZ-1)       │                                     │          │  │
│  │  │  │   IP: 10.0.30.20      │                                      │          │  │
│  │  │  │   Port: 1521          │                                      │          │  │
│  │  │  │   Instance: r5.xlarge │                                      │          │  │
│  │  │  └────────────────────────┘                                     │          │  │
│  │  │  Endpoint: oracle.xxx.rds.amazonaws.com                         │          │  │
│  │  │                                                                │          │  │
│  │  │  • Backup: 35 days retention                                   │          │  │
│  │  │  • Performance Insights: Enabled                               │          │  │
│  │  └──────────────────────────────────────────────────────────────────┘        │  │
│  └──────────────────────────────────────────────────────────────────────────────┘  │
│                                                                                    │
│  ┌──────────────────────────────────────────────────────────────────────────────┐  │
│  │                     Supporting AWS Services                                  │  │
│  │                                                                             │  │
│  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐              │  │
│  │  │ AWS Secrets     │  │  AWS KMS        │  │ CloudWatch      │              │  │
│  │  │ Manager         │  │  Encryption     │  │ Logs & Metrics  │              │  │
│  │  │ • DB Creds      │  │  Keys           │  │ • Container     │              │  │
│  │  │ • API Keys      │  │                 │  │   Insights      │              │  │
│  │  └─────────────────┘  └─────────────────┘  └─────────────────┘              │  │
│  │                                                                             │  │
│  │  ┌─────────────────┐                       ┌─────────────────┐              │  │
│  │  │ ECR             │                       │ AWS Backup      │              │  │
│  │  │ Container       │                       │ • EBS Snapshots │              │  │
│  │  │ Registry        │                       │ • RDS Backups   │              │  │
│  │  └─────────────────┘                       └─────────────────┘              │  │
│  │                                                                             │  │
│  │                                                                             │  │
│  └──────────────────────────────────────────────────────────────────────────────┘  │
│                                                                                    │
│  Security Groups:                                                                  │
│  • ALB SG: Allow 443 from Internet                                                │
│  • EKS Node SG: Allow from ALB, Allow to RDS SQL (1433)                          │
│  • Windows SG: Allow from ALB, Allow to RDS Oracle (1521)                        │
│  • RDS SQL SG: Allow 1433 from EKS Nodes                                         │
│  • RDS Oracle SG: Allow 1521 from Windows Servers                                │
│                                                                                  │
│  Network ACLs: Default Allow (Security Groups handle filtering)                  │
│  VPC Flow Logs: Enabled → CloudWatch Logs                                        │
└─────────────────────────────────────────────────────────────────────────────────────┘

                          
